<html>
<head>
	<title>
		Hello
	</title>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js" type="text/javascript"></script>

	<script src="./src/rangy-core.js" type="text/javascript"></script>
	<script src="./src/rangy-textrange.js" type="text/javascript"></script>
	<script src="./src/rangy-classapplier.js" type="text/javascript"></script>

	<style type="text/css">
		*.blue {
			background-color: #0bf;
		}
		*.green {
			background-color: #0f5;
		}
		*.orange {
			background-color: #fb0;
		}
	</style>
</head>
<body>
	<input type="button" id="greenButton" value="Toggle green" >

	<div id="hello">
		Hello there my name is ryan.
	</div>
	<div id="bye">
		Goodbye, then.
	</div>
	<script type="text/javascript">
		$(window).load(function(){

			rangy.init();

			var greenApply = rangy.createCssClassApplier("green");
			// var greenApply = rangy.createCssClassApplier("green", {
				// normalize: false,
				// applyToEditableOnly: true
			// });

			function toggleGreen() {
				// greenApply.toggleSelection();
				var range = rangy.createRange();
				var hello = document.getElementById("hello");
				range.selectNode(hello);
				range.selectCharacters(hello, 0, 10);
				greenApply.applyToRange(range);
			}

			var greenButton = document.getElementById("greenButton");
			greenButton.ontouchstart = greenButton.onmousedown = function() {
				toggleGreen();
				return false;
			};

			// return;

			var range = rangy.createRange();
			// console.log(range);

			var hello = document.getElementById("hello");
			// console.log(hello);
			range.selectNode(hello);
			// console.log(range);

			// range.selectCharacters(hello, 11, 15);

			greenApply.applyToRange(range, { normalize: false });
			console.log("done!");
		})		
	</script>
</body>
</html>