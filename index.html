<html>

<head>
<!-- wysihtml5 parser rules -->
<!-- <script src="wysihtml5/parser_rules/advanced.js"></script> -->
<!-- Library -->
<!-- <script src="wysihtml5/dist/wysihtml5-0.3.0.min.js"></script> -->

<!-- css -->
<link rel="stylesheet" type="text/css" href="style.css" />

<title>
Title
</title>

<!-- <link rel="stylesheet" href="../wysihtml5/website/css/stylesheet.css" -->

</head>



<body>
<!-- <div class="toolbar" id="wysihtml5-outline-toolbar" > -->
<!-- </div> -->
<div class="editor" id="outline-editor" >
	<h2>Outline</h2>
	<!-- <textarea id="draft-outline" ></textarea> -->
</div>

<div class="editor" id="editor" >
	<h2>Essay</h2>
	<!-- <textarea id="draft-text" ></textarea> -->
</div>

<script type="text/javascript" src="editor.js"></script>

<script type="text/javascript">
	// var editor = new WysihtmlEditor("wysihtml5-textarea", "editor");
	// var outline = new WysihtmlOutlineEditor("wysihtml5-outline", "outline-editor");

	var editor = new DraftEditor("draft-text", "editor");
	var outline = new DraftOutlineEditor("draft-outline", "outline-editor");

	editor.initialize();
	outline.initialize();

	var configureItems = function()
	{
		console.log("enter");
		console.log("outline.list: " + outline.list);
		console.log("outline.list.children: " + outline.list.children);
		console.log("outline.list.children.length: " + outline.list.children.length);
		for (var i=0; i<outline.list.children.length; i++)
		{
			var child = outline.list.children[i];
			console.log("child[" + i + "] = " + child);
			if (child.children.length == 0 || child.children[0].tagName != "INPUT")
			{
				outline.list.removeChild(child);
			}
		}

		var newListItem = outline.createListItem();
		outline.list.appendChild(newListItem);
	}

	document.getElementById("draft-outline").addEventListener("keydown", 
			function (e)
			{
				console.log("keydown");
				if (e.keyCode == 13)
				{
					setTimeout( function() {
						configureItems()
					}, 1);
					

					
				}
			}, false);

	// console.log("editor: " + editor.html())
	// console.log("outline: " + outline.html())
</script>

<!-- <br><br><br><br> -->
<!-- <h2>Log</h2> -->
<!-- <div id="log" /> -->

<!-- <script type="text/javascript" src="analyze.js"></script>	 -->

</body>
</html>
