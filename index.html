<html>

<head>
<!-- wysihtml5 parser rules -->
<!-- <script src="wysihtml5/parser_rules/advanced.js"></script> -->
<!-- Library -->
<!-- <script src="wysihtml5/dist/wysihtml5-0.3.0.min.js"></script> -->

<!-- css -->
<link rel="stylesheet" type="text/css" href="style.css" />

<title>
Draft
</title>

<!-- <link rel="stylesheet" href="../wysihtml5/website/css/stylesheet.css" -->

</head>



<body>
<!-- load jquery -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" ></script>
<!-- <div class="toolbar" id="wysihtml5-outline-toolbar" > -->
<!-- </div> -->

<div class="editor" id="outline-editor" >
	<h2>Outline</h2>
	<!-- <textarea id="draft-outline" ></textarea> -->
</div>

<div class="editor" id="editor" >
	<input id="analyze-button" type="button" value="Analyze" onclick="analyze()">
	<input id="fillin-button" type="button" value="Fill In" onclick="fillin()">
	<h2>Essay</h2>
	<!-- <textarea id="draft-text" ></textarea> -->
</div>

<script type="text/javascript" src="editor.js"></script>
<script type="text/javascript" src="analyze.js"></script>

<script type="text/javascript">
	// var editor = new WysihtmlEditor("wysihtml5-textarea", "editor");
	// var outline = new WysihtmlOutlineEditor("wysihtml5-outline", "outline-editor");

	var editor = new DraftEditor("draft-text", "editor");
	var outline = new DraftOutlineEditor("draft-outline", "outline-editor");

	editor.initialize();
	outline.initialize();

	document.getElementById("draft-outline").addEventListener("keydown", 
			function (e)
			{
				console.log("keydown");
				if (e.keyCode == 13)
				{
					setTimeout( function() {
						alert("add checkboxes");
						outline.addCheckboxes();
					}, 1);
				}
			}, false);

	function analyze()
	{
		var analyzer = new Analyzer(editor, outline);
		
		analyzer.analyze()
	}
	// console.log("editor: " + editor.html())
	// console.log("outline: " + outline.html())
</script>

<script type="text/javascript">
	// seed with some existing stuff
	function fillin()
	{
		var list = document.getElementById("outline-ul");
		console.log(list.children)

		var listItem = list.children[0];
		listItem.innerHTML += "This is the first point of the essay.";

		listItem = outline.createListItem();
		listItem.innerHTML += "Here's the second point, which is also really important!"
		console.log(listItem);
		list.appendChild(listItem);

		listItem = outline.createListItem();
		listItem.innerHTML += "And look, a third point!"
		console.log(listItem);
		list.appendChild(listItem);

		listItem = outline.createListItem();
		listItem.innerHTML += "The fourth point is the very best."
		console.log(listItem);
		list.appendChild(listItem);

		outline.addCheckboxes()

		var essay = document.getElementById("draft-text");
		essay.innerHTML += "I present the first point of the essay. My second point is really important, too. The fourth is the best point. But look, found my third point!"
	}
</script>

<!-- <br><br><br><br> -->
<!-- <h2>Log</h2> -->
<!-- <div id="log" /> -->

<!-- <script type="text/javascript" src="analyze.js"></script>	 -->

</body>
</html>
